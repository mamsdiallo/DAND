{
    "collab_server" : "",
    "contents" : "---\ntitle: \"R Notebook\"\noutput: rmarkdown::github_document\n---\n\n1. Objective\n\nA stock market is where buyers and sellers trade shares of a company, and is one of the most popular ways for individuals and companies to invest money. The size of the world stock market Â is now estimated to be in the trillions. The largest stock market in the world is the New York Stock Exchange (NYSE), located in New York City. About 2,800 companies are listed on the NSYE. In this problem, we'll look at the monthly stock prices of five of these companies: IBM, General Electric (GE), Procter and Gamble, Coca Cola, and Boeing. The data used in this problem comes from Infochimps.\n\n## TODO\n\nDownload and read the following files into R, using the read.csv function: IBMStock.csv, GEStock.csv, ProcterGambleStock.csv, CocaColaStock.csv, and BoeingStock.csv. (Do not open these files in any spreadsheet software before completing this problem because it might change the format of the Date field.)\nCall the data frames \"IBM\", \"GE\", \"ProcterGamble\", \"CocaCola\", and \"Boeing\", respectively. Each data frame has two variables, described as follows:\nDate: the date of the stock price, always given as the first of the month. StockPrice: the average stock price of the company in the given month.\nIn this problem, we'll take a look at how the stock dynamics of these companies have changed over time\n\n\n```{r Change the local to English}\nSys.setlocale(\"LC_ALL\",\"English\")\n```\n\n```{r import libraries}\nlibrary(dplyr)\nlibrary(ggplot2)\n```\n\n\n```{r read IBM, GE, Procter and Gamble, CocaCola and Boeing data}\ndata1 = read.csv(\"../data/IBMStock.csv\")\nIBM = tbl_df(data1)\ndata2 = read.csv(\"../data/GEStock.csv\")\nGE = tbl_df(data2)\ndata3 = read.csv(\"../data/ProcterGambleStock.csv\")\nProcterGamble = tbl_df(data3)\ndata4 = read.csv(\"../data/CocaColaStock.csv\")\nCocaCola = tbl_df(data4)\ndata5 = read.csv(\"../data/BoeingStock.csv\")\nBoeing = tbl_df(data5)\n```\n\n1.1 - SUMMARY STATISTICS \n\nBefore working with these data sets, we need to convert the dates into a format that R can understand. Take a look at the structure of one of the datasets using the str function. Right now, the date variable is stored as a factor. We can convert this to a \"Date\" object in R by using the following five commands (one for each data set):\n\n```{r convert to Date object}\nIBM$Date = as.Date(IBM$Date, \"%m/%d/%y\")\nGE$Date = as.Date(GE$Date, \"%m/%d/%y\")\nCocaCola$Date = as.Date(CocaCola$Date, \"%m/%d/%y\")\nProcterGamble$Date = as.Date(ProcterGamble$Date, \"%m/%d/%y\")\nBoeing$Date = as.Date(Boeing$Date, \"%m/%d/%y\")\n```\n\nThe first argument to the as.Date function is the variable we want to convert, and the second argument is the format of the Date variable. We can just overwrite the original Date variable values with the output of this function. Now, answer the following questions using the str and summary functions.\n\nOur five datasets all have the same number of observations. How many observations are there in each data set?\n\n```{r how many observations}\nstr(IBM)\n```\n\n1.2 - SUMMARY STATISTICS\n\nWhat is the earliest year in our datasets?\n\n```{r earliest year}\nsummary(IBM)\n```\n\n 1.3 - SUMMARY STATISTICS \n \n What is the latest year in our datasets?\n \n 1.4 - SUMMARY STATISTICS \n \n What is the mean stock price of IBM over this time period?\n\n 1.5 - SUMMARY STATISTICS \n \n What is the minimum stock price of General Electric (GE) over this time period?\n\n```{r minimum stock price for GE}\nsummary(GE)\n```\n\n1.6 - SUMMARY STATISTICS \n\nWhat is the maximum stock price of Coca-Cola over this time period?\n\n```{r maximum stock price for Coca-Cola}\nsummary(CocaCola)\n```\n\n 1.7 - SUMMARY STATISTICS \n \n What is the median stock price of Boeing over this time period?\n\n```{r median stock price of Boeing}\nsummary(Boeing)\n```\n\n1.8 - SUMMARY STATISTICS \n\nWhat is the standard deviation of the stock price of Procter & Gamble over this time period?\n\n```{r sd of the stock price of P&G}\nsd(ProcterGamble$StockPrice)\n```\n\n2.1 - VISUALIZING STOCK DYNAMICS \n\nLet's plot the stock prices to see if we can visualize trends in stock prices during this time period. Using the plot function, plot the Date on the x-axis and the StockPrice on the y-axis, for Coca-Cola.\nThis plots our observations as points, but we would really like to see a line instead, since this is a continuous time period. To do this, add the argument type=\"l\" to your plot command, and re-generate the plot (the character is quotes is the letter l, for line). You should now see a line plot of the Coca-Cola stock price.\n\n```{r plot1 Stock price vs Date}\nplot(CocaCola$Date, CocaCola$StockPrice, type=\"l\")\n```\n\nAround what year did Coca-Cola has its highest stock price in this time period?\n\n**1973**\n\nAround what year did Coca-Cola has its lowest stock price in this time period?\n\n**1980**\n\n2.2 - VISUALIZING STOCK DYNAMICS \n\nNow, let's add the line for Procter & Gamble too. You can add a line to a plot in R by using the lines function instead of the plot function. Keeping the plot for Coca-Cola open, type in your R console:\n\nUnfortunately, it's hard to tell which line is which. Let's fix this by giving each line a color. First, re-run the plot command for Coca-Cola, but add the argument col=\"red\". You should see the plot for Coca-Cola show up again, but this time in red. Now, let's add the Procter & Gamble line (using the lines function like we did before), adding the argument col=\"blue\". You should now see in your plot the Coca-Cola stock price in red, and the Procter & Gamble stock price in blue.\n\n\n```{r plot2 add a line and color}\nplot(CocaCola$Date, CocaCola$StockPrice, type=\"l\",col=\"red\")\nlines(ProcterGamble$Date, ProcterGamble$StockPrice,col=\"blue\")\n```\n\nAs an alternative choice to changing the colors, you could instead change the line type of the Procter & Gamble line by adding the argument lty=2. This will make the Procter & Gamble line dashed.\nUsing this plot, answer the following questions.\n\n\n```{r plot3 add line type}\nplot(CocaCola$Date, CocaCola$StockPrice, type=\"l\",col=\"red\",lty=1)\nlines(ProcterGamble$Date, ProcterGamble$StockPrice,col=\"blue\",lty=2)\nabline(v=as.Date(c(\"2000-03-01\")), lwd=2)\n\n```\n\nIn March of 2000, the technology bubble burst, and a stock market crash occurred. According to this plot, which company's stock dropped more?\n\n**Procter and Gamble**\n\n\nin your R console, with the plot still open. This generates a vertical line at the date March 1, 2000. The argument lwd=2 makes the line a little thicker. You can change the date in this command to generate the vertical line in different locations.\n\n2.3 - VISUALIZING STOCK DYNAMICS \n\nAnswer these questions using the plot you generated in the previous problem.\nAround 1983, the stock for one of these companies (Coca-Cola or Procter and Gamble) was going up, while the other was going down. Which one was going up?\n\n```{r plot4 around 1983}\nplot(CocaCola$Date, CocaCola$StockPrice, type=\"l\",col=\"red\",lty=1)\nlines(ProcterGamble$Date, ProcterGamble$StockPrice,col=\"blue\",lty=2)\nabline(v=as.Date(c(\"1983-01-01\")), lwd=2)\n```\n\n**Coca-Cola**\n\n\nIn the time period shown in the plot, which stock generally has lower values?\n\n**Coca-Cola**\n\n\n3.1 - VISUALIZING STOCK DYNAMICS 1995-2005\nLet's take a look at how the stock prices changed from 1995-2005 for all five companies. In your R console, start by typing the following plot command:\n\n```{r plot5 period 1995-2005}\nplot(CocaCola$Date[301:432], CocaCola$StockPrice[301:432], type=\"l\", col=\"red\", ylim=c(0,210))\n```\n\nThis will plot the CocaCola stock prices from 1995 through 2005, which are the observations numbered from 301 to 432. The additional argument, ylim=c(0,210), makes the y-axis range from 0 to 210. This will allow us to see all of the stock values when we add in the other companies.\n\nNow, use the lines function to add in the other four companies, remembering to only plot the observations from 1995 to 2005, or [301:432]. You don't need the \"type\" or \"ylim\" arguments for the lines function, but remember to make each company a different color so that you can tell them apart. Some color options are \"red\", \"blue\", \"green\", \"purple\", \"orange\", and \"black\". To see all of the color options in R, type colors() in your R console.\n\n```{r plot6 All companies}\nplot(CocaCola$Date[301:432], CocaCola$StockPrice[301:432], type=\"l\", col=\"red\", ylim=c(0,210))\nlines(ProcterGamble$Date, ProcterGamble$StockPrice,col=\"blue\",lty=2)\nlines(IBM$Date, IBM$StockPrice,col=\"green\",lty=3)\nlines(Boeing$Date, Boeing$StockPrice,col=\"purple\",lty=4)\nlines(GE$Date, GE$StockPrice,col=\"orange\",lty=5)\nabline(v=as.Date(c(\"2000-03-01\")), lwd=2)\n```\nWhich stock fell the most right after the technology bubble burst in March 2000?\n\n**GE**\n\nWhich stock reaches the highest value in the time period 1995-2005?\n\n**IBM**\n\n\n3.3 - VISUALIZING STOCK DYNAMICS 1995-2005 \nIn October of 1997, there was a global stock market crash that was caused by an economic crisis in Asia. Comparing September 1997 to November 1997, which companies saw a decreasing trend in their stock price? \n\n```{r plot7}\nplot(CocaCola$Date[301:432], CocaCola$StockPrice[301:432], type=\"l\", col=\"red\", ylim=c(0,210))\nlines(ProcterGamble$Date, ProcterGamble$StockPrice,col=\"blue\",lty=2)\nlines(IBM$Date, IBM$StockPrice,col=\"green\",lty=3)\nlines(Boeing$Date, Boeing$StockPrice,col=\"purple\",lty=4)\nlines(GE$Date, GE$StockPrice,col=\"orange\",lty=5)\nabline(v=as.Date(c(\"1997-09-01\")), lwd=2)\nabline(v=as.Date(c(\"1997-11-01\")), lwd=2)\n```\n3.4 - VISUALIZING STOCK DYNAMICS 1995-2005 (1/1 point)\nIn the last two years of this time period (2004 and 2005) which stock seems to be performing the best, in terms of increasing stock price?\n\n**Boeing**\n\n\n\n```{r plot8}\nplot(CocaCola$Date[301:432], CocaCola$StockPrice[301:432], type=\"l\", col=\"red\", ylim=c(0,210))\nlines(ProcterGamble$Date, ProcterGamble$StockPrice,col=\"blue\",lty=2)\nlines(IBM$Date, IBM$StockPrice,col=\"green\",lty=3)\nlines(Boeing$Date, Boeing$StockPrice,col=\"purple\",lty=4)\nlines(GE$Date, GE$StockPrice,col=\"orange\",lty=5)\nabline(v=as.Date(c(\"2004-01-01\")), lwd=2)\nabline(v=as.Date(c(\"2005-12-31\")), lwd=2)\n```\n\n4.1 - MONTHLY TRENDS (1/1 point)\nLastly, let's see if stocks tend to be higher or lower during certain months. Use the tapply command to calculate the mean stock price of IBM, sorted by months. To sort by months, use: \nmonths(IBM$Date)\nas the second argument of the tapply function.\n\n```{r}\nmean(IBM$StockPrice)\nsort(tapply(IBM$StockPrice, months(IBM$Date), mean))\n```\n\n\nMONTHLY TRENDS\nRepeat the tapply function from the previous problem for each of the other four companies, and use the output to answer the remaining questions.\nGeneral Electric and Coca-Cola both have their highest average stock price in the same month. Which month is this?\n\n```{r}\nsort(tapply(GE$StockPrice, months(GE$Date), mean))\nsort(tapply(CocaCola$StockPrice, months(CocaCola$Date), mean))\n```\n\n\n**April**\n\nMONTHLY TRENDS\nFor the months of December and January, every company's average stock is higher in one month and lower in the other. In which month are the stock prices lower?\n\n```{r}\nsort(tapply(IBM$StockPrice, months(IBM$Date), mean))\nsort(tapply(GE$StockPrice, months(GE$Date), mean))\nsort(tapply(ProcterGamble$StockPrice, months(ProcterGamble$Date), mean))\nsort(tapply(CocaCola$StockPrice, months(CocaCola$Date), mean))\nsort(tapply(Boeing$StockPrice, months(Boeing$Date), mean))\n```\n\n**December**\n\n\n",
    "created" : 1499027389656.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "3147372235",
    "id" : "9ADF7EE6",
    "lastKnownWriteTime" : 1495126786,
    "last_content_update" : 1495126786,
    "path" : "~/GitHub/RegressionProgramming/Stocks/resources/Stocks.Rmd",
    "project_path" : null,
    "properties" : {
    },
    "relative_order" : 4,
    "source_on_save" : false,
    "source_window" : "",
    "type" : "r_markdown"
}